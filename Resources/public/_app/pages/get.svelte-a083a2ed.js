import{S as J,i as L,s as O,e as c,t as R,k as G,c as u,a as f,h as H,d as l,m as K,K as U,b as a,g as x,J as h,j as X,n as N,w as B,f as F}from"../chunks/index-b421d723.js";function Q(_){let s;return{c(){s=c("i"),this.h()},l(e){s=u(e,"I",{class:!0,style:!0}),f(s).forEach(l),this.h()},h(){a(s,"class","bi bi-suit-heart-fill text-danger"),F(s,"scale","200%")},m(e,i){x(e,s,i)},d(e){e&&l(s)}}}function W(_){let s;return{c(){s=c("i"),this.h()},l(e){s=u(e,"I",{class:!0,style:!0}),f(s).forEach(l),this.h()},h(){a(s,"class","bi bi-x-circle-fill text-danger"),F(s,"scale","200%")},m(e,i){x(e,s,i)},d(e){e&&l(s)}}}function Y(_){let s,e;return{c(){s=c("div"),e=c("span"),this.h()},l(i){s=u(i,"DIV",{class:!0,role:!0});var t=f(s);e=u(t,"SPAN",{class:!0}),f(e).forEach(l),t.forEach(l),this.h()},h(){a(e,"class","sr-only"),a(s,"class","spinner-grow text-primary"),a(s,"role","status")},m(i,t){x(i,s,t),h(s,e)},d(i){i&&l(s)}}}function Z(_){let s,e,i,t,n,w,g,y,d,m,D,E,p,I,v;function S(r,b){if(r[1]=="loading")return Y;if(r[1]=="error")return W;if(r[1]=="success")return Q}let k=S(_),o=k&&k(_);return{c(){s=c("div"),e=c("nav"),i=c("div"),t=c("a"),n=c("img"),g=R(`
                AmeKanji`),y=G(),d=c("div"),m=c("div"),o&&o.c(),D=G(),E=c("div"),p=c("div"),I=c("p"),v=R(_[0]),this.h()},l(r){s=u(r,"DIV",{id:!0});var b=f(s);e=u(b,"NAV",{class:!0});var A=f(e);i=u(A,"DIV",{class:!0});var q=f(i);t=u(q,"A",{class:!0,href:!0});var T=f(t);n=u(T,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),g=H(T,`
                AmeKanji`),T.forEach(l),q.forEach(l),A.forEach(l),b.forEach(l),y=K(r),d=u(r,"DIV",{class:!0});var V=f(d);m=u(V,"DIV",{class:!0});var z=f(m);o&&o.l(z),z.forEach(l),D=K(V),E=u(V,"DIV",{class:!0});var M=f(E);p=u(M,"DIV",{class:!0});var P=f(p);I=u(P,"P",{});var j=f(I);v=H(j,_[0]),j.forEach(l),P.forEach(l),M.forEach(l),V.forEach(l),this.h()},h(){U(n.src,w="./logo_64.png")||a(n,"src",w),a(n,"alt","logo 64px"),a(n,"width","30"),a(n,"height","24"),a(n,"class","d-inline-block align-text-top"),a(t,"class","navbar-brand"),a(t,"href","./"),a(i,"class","container-fluid"),a(e,"class","navbar navbar-light bg-light"),a(s,"id","header"),a(m,"class","row loading svelte-tftz49"),a(p,"class","text svelte-tftz49"),a(E,"class","row message svelte-tftz49"),a(d,"class","container svelte-tftz49")},m(r,b){x(r,s,b),h(s,e),h(e,i),h(i,t),h(t,n),h(t,g),x(r,y,b),x(r,d,b),h(d,m),o&&o.m(m,null),h(d,D),h(d,E),h(E,p),h(p,I),h(I,v)},p(r,[b]){k!==(k=S(r))&&(o&&o.d(1),o=k&&k(r),o&&(o.c(),o.m(m,null))),b&1&&X(v,r[0])},i:N,o:N,d(r){r&&l(s),r&&l(y),r&&l(d),o&&o.d()}}}const C=2e3;function $(_,s,e){var t="Sending request",n="loading";function w(g){var y="http://localhost:9000/api/get?id="+g,d=new XMLHttpRequest;d.open("GET",y,!0),d.onload=function(){var m=this.status,D=this.responseText,E="http://localhost:9000/api/get?id="+g,p={},I=this.getResponseHeader("Content-Type");if(I=="application/zip"){e(1,n="success"),e(0,t=""),window.open(E,"_self");return}else I=="application/json"&&(p=JSON.parse(D));if(m!=200){e(1,n="error"),e(0,t="Error:  "+(p.Message||"Invalid response from server."));return}var v=p.Status,S=Math.round(p.Progress*100);if(v=="Deleted"){e(1,n="error"),e(0,t="Error. File has already been deleted.");return}else if(v=="In Progress"){e(1,n="loading"),e(0,t="In progress.... ("+String(S)+"%)"),setTimeout(()=>{w(g)},C);return}else if(v=="Failed"){e(1,n="error"),e(0,t="Task failed :(");return}else if(v=="Accepted"){e(1,n="loading"),e(0,t="In progress..."),setTimeout(()=>{w(g)},C);return}else console.log(v),console.log(S)},d.send()}return B(async()=>{const y=new URLSearchParams(window.location.search).get("id");w(y)}),[t,n,!1]}class se extends J{constructor(s){super(),L(this,s,$,Z,O,{prerender:2})}get prerender(){return this.$$.ctx[2]}}export{se as default};
